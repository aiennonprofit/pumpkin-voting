<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pumpkin Carving Contest</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>ðŸŽƒ Pumpkin Carving Contest ðŸŽƒ</h1>
        <nav>
            <button id="viewGalleryBtn" class="nav-btn active">Vote</button>
            <button id="viewResultsBtn" class="nav-btn">Results</button>
            <button id="viewSubmitBtn" class="nav-btn">Submit Entry</button>
            <button id="adminDashboardBtn" class="nav-btn hidden">Admin Dashboard</button>
        </nav>
        <div id="authStatus" class="auth-status">
            <!-- Auth status will be displayed here -->
            <button id="loginBtn" class="btn btn-secondary">Login</button>
        </div>
    </header>

    <main>
        <!-- Submit Entry Section -->
        <section id="submitSection" class="section hidden">
            <div class="container">
                <h2>Submit Your Pumpkin</h2>
                <form id="pumpkinForm">
                    <div class="form-group">
                        <label for="pumpkinTitle">Pumpkin Title *</label>
                        <input type="text" id="pumpkinTitle" required placeholder="Give your pumpkin a creative name">
                    </div>

                    <div class="form-group">
                        <label for="pumpkinDescription">Description *</label>
                        <textarea id="pumpkinDescription" required placeholder="Tell us about your pumpkin creation..." rows="4"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="carverName">Your Name *</label>
                        <input type="text" id="carverName" required placeholder="Your name">
                    </div>

                    <div class="form-group">
                        <label for="pumpkinImage">Pumpkin Photo *</label>
                        <input type="file" id="pumpkinImage" accept="image/*" required>
                        <div id="imagePreview" class="image-preview hidden">
                            <img id="previewImg" src="" alt="Preview">
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">Submit Pumpkin</button>
                </form>
            </div>
        </section>

        <!-- Gallery/Voting Section -->
        <section id="gallerySection" class="section">
            <div class="container">
                <h2>Cast Your Vote!</h2>
                <p class="subtitle">Click on your favorite pumpkin to vote</p>
                <div id="pumpkinGallery" class="gallery">
                    <!-- Pumpkins will be dynamically added here -->
                </div>
                <div id="noEntries" class="no-entries hidden">
                    <p>No pumpkin entries yet. Be the first to submit!</p>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section id="resultsSection" class="section hidden">
            <div class="container">
                <h2>Contest Results</h2>
                <div id="leaderboard" class="leaderboard">
                    <!-- Results will be dynamically added here -->
                </div>
                <div id="noResults" class="no-entries hidden">
                    <p>No votes cast yet!</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal for voting confirmation -->
    <div id="voteModal" class="modal hidden">
        <div class="modal-content">
            <h3>Vote for this pumpkin?</h3>
            <p id="modalPumpkinTitle"></p>
            <div class="modal-buttons">
                <button id="confirmVoteBtn" class="btn btn-primary">Yes, Vote!</button>
                <button id="cancelVoteBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Authentication Modal -->
    <div id="authModal" class="modal hidden">
        <div class="modal-content auth-modal">
            <button id="closeAuthModal" class="close-modal">&times;</button>

            <div class="auth-tabs">
                <button id="loginTabBtn" class="auth-tab-btn active">Login</button>
                <button id="registerTabBtn" class="auth-tab-btn">Register</button>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="auth-form">
                <h3>Welcome Back!</h3>
                <form id="loginFormElement">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" required placeholder="your-email@example.com">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" required placeholder="Enter your password">
                    </div>
                    <div id="loginError" class="error-message hidden"></div>
                    <button type="submit" class="btn btn-primary btn-full">Login</button>
                </form>
            </div>

            <!-- Register Form -->
            <div id="registerForm" class="auth-form hidden">
                <h3>Create Account</h3>
                <form id="registerFormElement">
                    <div class="form-group">
                        <label for="registerName">Your Name</label>
                        <input type="text" id="registerName" required placeholder="John Doe">
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">Email</label>
                        <input type="email" id="registerEmail" required placeholder="your-email@example.com">
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Password</label>
                        <input type="password" id="registerPassword" required placeholder="At least 8 characters">
                        <small>Minimum 8 characters</small>
                    </div>
                    <div class="form-group">
                        <label for="registerPasswordConfirm">Confirm Password</label>
                        <input type="password" id="registerPasswordConfirm" required placeholder="Re-enter password">
                    </div>
                    <div id="registerError" class="error-message hidden"></div>
                    <button type="submit" class="btn btn-primary btn-full">Create Account</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore-compat.js"></script>

    <!-- Firebase Configuration -->
    <script src="firebase-config.js"></script>

    <!-- Authentication Module -->
    <script src="auth.js"></script>

    <!-- Firestore Service Module -->
    <script src="firestore.js"></script>

    <!-- Application Scripts -->
    <script src="script.js"></script>
</body>
</html>
